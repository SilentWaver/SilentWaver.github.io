---
title: 内网穿透实验
tags:
  - 网络
  - 内网穿透
categories: []
date: 2021-03-10 16:11:09
---

昨天中午买的小型主机到了，打算搭个个人网盘顺带当个服务器啥的。当我终于把网盘配置好并兴高采烈的把网盘地址分享给我的lsp群友时，他们跟我说：连不到网盘。

我说，啪的一下，很快啊，我就想起来我这网相当于一个局域网，外网应该是连不进来的。我说婷婷，我去搞个内网穿透试试。

然后昨晚就各种搜教程搞了一晚上。没整成。今天上午上完课回来就接着开干。当然还是没整成。但是我也算是搞懂了失败的原因，并找到了一个可行的解决方式，有钱了一定试o(╥﹏╥)o

<!-- more -->

内网穿透大概有两种形式

1.端口映射 需要路由器有公网ip，通过将公网ip+duankou与内网ip+端口绑定，使发到公网ip的数据被转发到目的内网端口。

2.反向代理 找个有公网ip的机器，反向代理，使送到有外网主机的数据被送到内网主机。



我一开始找的方法是用frp实现反向代理，失败原因就是没有有外网ip的主机。部署完了才发现没服务端。也试了其他一些类似的程序，差不多的失败。

然后我尝试用nat123设置端口映射，也不行。用路由器自带的端口转发，也是不行。最后意识到是因为我们这校园网分配给路由器的ip还是个内网ip，我也没办法进学校的机房搞,只能放弃这条路。

然后那就只能尝试方法2，所以就需要搞个云服务器，没钱钱，买不起，下次一定（


--- 2021.3.16 ---


今早搞了个阿里云的学生云主机，白嫖两个月，于是打算接着试试内网穿透。用了frp。基本配置方法很多博客都有写，在此不再重复，主要记录下我配置时遇到的问题。

1.配置服务端时，bashboard无法正常打开。

大概原因是我把整个frp文件夹丢到了/root文件夹下，而且frps.services 文件中的 ExecStart 项没配置对。后来把整个文件夹扔到了/opt里，并改

```
execstart=frps所在文件夹 -c 所在文件夹frps.ini
```

这俩文件就在同一个文件夹里。记得别把frp扔到~里,（我也不知道为啥，我猜是root文件夹权限高难以被读取）



